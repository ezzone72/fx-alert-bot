<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FX Alert PWA</title>

  <link rel="manifest" href="/fx-alert-bot/manifest.json" />
  <meta name="theme-color" content="#111111" />

  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#0b0b0b; color:#fff; margin:0; }
    .wrap { max-width:720px; margin:0 auto; padding:24px; }
    .card { background:#141414; border:1px solid #2a2a2a; border-radius:14px; padding:16px; margin:12px 0; }
    .muted { color:#aaa; font-size: 14px; }
    button { background:#2b72ff; color:#fff; border:0; padding:12px 14px; border-radius:12px; font-weight:700; cursor:pointer; }
    code { background:#111; padding:2px 6px; border-radius:8px; }
    .ok { color:#7CFF7C; }
    .bad { color:#FF7C7C; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>FX Alert (PWA)</h1>

    <div class="card">
      <h3>ì„¤ì¹˜</h3>
      <p class="muted">
        Android: Chrome â†’ <b>â‹® â†’ ì•± ì„¤ì¹˜</b> (ë˜ëŠ” í™ˆ í™”ë©´ì— ì¶”ê°€)<br/>
        iPhone: Safari â†’ <b>ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</b>
      </p>
      <p class="muted">
        ì„¤ì¹˜ê°€ â€œë°”ë¡œê°€ê¸°â€ë¡œë§Œ ë‚˜ì˜¤ë©´, ì•„ì§ PWA ì¡°ê±´ì„ ë§Œì¡± ëª»í•œ ê²ë‹ˆë‹¤(ìš°ë¦¬ê°€ ì§€ê¸ˆ ê³ ì¹˜ëŠ” ì¤‘).
      </p>
    </div>

    <div class="card">
      <h3>í‘¸ì‹œ ìˆ˜ì‹  ë“±ë¡</h3>
      <p class="muted">ë“±ë¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•Œë¦¼ ê¶Œí•œ ìš”ì²­ â†’ í† í° ë°œê¸‰ â†’ Firestore ì €ì¥ê¹Œì§€ ì§„í–‰ë©ë‹ˆë‹¤.</p>
      <button id="btn">ğŸ”” í‘¸ì‹œ ë“±ë¡í•˜ê¸°</button>
      <p id="status" class="muted">ìƒíƒœ: ëŒ€ê¸°</p>
      <p class="muted">í† í°(ì¼ë¶€): <code id="tokenPreview">-</code></p>
    </div>

    <div class="card">
      <h3>ë²„ì „</h3>
      <p class="muted">v0.2 (absolute path + scope fix)</p>
    </div>
  </div>

  <!-- Firebase compat SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-messaging-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

  <!-- âœ… í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸(í‘¸ì‹œ ë“±ë¡ ë¡œì§) -->
  <script src="/fx-alert-bot/app.js"></script>

  <script>
    // âœ… í•µì‹¬: GitHub Pages í•˜ìœ„ ê²½ë¡œì—ì„œ PWA ì„¤ì¹˜ê°€ ë˜ë ¤ë©´
    // Service Workerë¥¼ ë ˆí¬ ë£¨íŠ¸(/fx-alert-bot/) ìŠ¤ì½”í”„ë¡œ ê°•ì œí•´ì•¼ í•©ë‹ˆë‹¤.
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("/fx-alert-bot/sw.js", { scope: "/fx-alert-bot/" })
        .catch(console.error);
    }
  </script>
</body>
</html>
